import{r,d as q,j as e}from"./app-KWrrAxLi.js";import{S as L,d as F,a as R}from"./react-select.esm-BJQ3taTF.js";function B({services:N}){const[o,h]=r.useState(""),[m,p]=r.useState(""),[x,v]=r.useState(0),[y,f]=r.useState("Cash"),[u,w]=r.useState(0),[S,d]=r.useState(!1),{errors:n,flash:E}=q.usePage().props,[l,c]=r.useState([{name:"",quantity:1,price:""}]),g=(t,s,a)=>{const i=[...l];i[t][s]=s==="name"?a:parseFloat(a),c(i)},C=()=>{c([...l,{name:"",quantity:1,price:""}])},k=t=>{const s=l.filter((a,i)=>i!==t);c(s)},j=t=>t.quantity*t.price,b=()=>l.reduce((t,s)=>t+j(s),0),I=(t,s)=>parseInt(t)+parseInt(s),A=t=>{t.preventDefault(),d(!0),F.Inertia.post("/medical-invoice",{items:l,patient:m,address:o,foc:u,discount:x,payment:y},{preserveScroll:!0,onSuccess:()=>{d(!1),console.log("Success voucher"),R.fire({title:"<span style='color:#000'>အောင်မြင်ပါသည်...</span>"}),c([{name:"",quantity:1,price:""}]),p(""),h(""),window.location.href="/admin/medical-orders"},onError:s=>{s.status&&s.status,d(!1)}})},P=(t,s)=>{const a=[...l];a[s].name=t.value,c(a)},$={control:t=>({...t,padding:"6px",minHeight:"30px",border:"1px solid #000"}),option:(t,s)=>({...t,padding:"5px 15px"}),valueContainer:t=>({...t,padding:"0 8px"})};return e.jsxs("div",{className:"w-3/4 mx-auto bg-gray-200 p-4 mt-3 text-whit max-h-full",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{children:["Patient Name: ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:m,onChange:t=>p(t.target.value),className:"p-2 border-0 border-b-1 outline-0"}),n.patient&&e.jsx("div",{className:"text-red-500 text-sm",children:n.patient})]}),e.jsxs("div",{children:[e.jsxs("label",{children:["Patient address: ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o,onChange:t=>h(t.target.value),className:"p-2 border-0 border-b-1 outline-0"}),n.address&&e.jsx("div",{className:"text-red-500 text-sm",children:n.address})]}),e.jsxs("div",{children:[e.jsxs("label",{children:["Payment: ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{onChange:t=>f(t.target.value),className:"p-2 border-0 border-b-1 outline-0 w-50",children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Pay",children:"Pay"})]}),n.address&&e.jsx("div",{className:"text-red-500 text-sm",children:n.address})]})]}),e.jsx("br",{}),e.jsxs("table",{className:"p-2 w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:" bg-cyan-600",children:[e.jsx("th",{className:"p-2",children:"Name"}),e.jsx("th",{children:"Qty"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:e.jsx("button",{onClick:C,style:{cursor:"pointer"},children:"+ Add "})})]})}),e.jsxs("tbody",{children:[l.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-1 w-1/2",children:e.jsx(L,{options:N,isSearchable:!0,styles:$,onChange:a=>P(a,s),className:`py-2 px-2 w-full ${n[`items.${s}.name`]?"border-red-500":""}`})}),e.jsx("td",{className:"p-1 w-1/7",children:e.jsx("input",{type:"number",min:"1",value:t.quantity,onChange:a=>g(s,"quantity",a.target.value),className:`border p-2 w-full bg-white ${n[`items.${s}.quantity`]?"border-red-500":"border-1"}`})}),e.jsx("td",{className:"p-1 w-1/7",children:e.jsx("input",{type:"number",value:t.price,onChange:a=>g(s,"price",a.target.value),className:`border p-2 w-full bg-white ${n[`items.${s}.price`]?"border-red-500":"border-1"}`})}),e.jsx("td",{className:"p-1 w-1/7",style:{textAlign:"right"},children:e.jsxs("span",{className:"p-2  w-full",children:[" ",j(t).toFixed(2)]})}),e.jsx("td",{style:{width:"100px",textAlign:"center"},children:l.length>1&&e.jsx("svg",{className:"text-red-500 size-6",onClick:()=>k(s),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{className:"text-red-500",strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]},s)),e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"font-bold font-black",style:{textAlign:"right",paddingRight:"20px"},children:"Total"}),e.jsxs("td",{colSpan:1,className:"p-1 float-right",children:[b().toFixed(2)," "]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"font-bold font-black",style:{textAlign:"right",paddingRight:"20px"},children:"Discount"}),e.jsx("td",{className:"p-1",children:e.jsx("input",{type:"number",min:"1",className:"p-1 border-1 w-full bg-white",onChange:t=>v(t.target.value)})})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"font-bold font-black",style:{textAlign:"right",paddingRight:"20px"},children:"FOC"}),e.jsx("td",{className:"p-1",children:e.jsx("input",{type:"number",min:"1",className:"p-1 border-1 w-full bg-white",onChange:t=>w(t.target.value)})})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"font-bold font-black",style:{textAlign:"right",paddingRight:"20px"},children:"Total Amount"}),e.jsx("td",{className:"p-1",children:b()-I(x,u)})]})]})]}),e.jsxs("div",{className:"w-full text-center gap-2",children:[e.jsx("a",{href:"/admin/medical-orders",className:"px-4  py-2 bg-sky-400 hover:bg-sky-500 mr-3 rounded",children:"Back"}),e.jsxs("button",{type:"button",onClick:A,className:"bg-green-600 mx-auto hover:bg-green-700 text-white mr-2 font-semibold py-2 px-4 rounded",children:[" ",S?"Loading...":"Save"," "]})]})]})}export{B as default};
